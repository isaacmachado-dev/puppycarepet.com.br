// Este é o seu arquivo de esquema Prisma.
// Saiba mais na documentação: https://pris.ly/d/prisma-schema

// Procurando maneiras de acelerar suas consultas ou escalar facilmente com suas funções serverless ou edge?

// Experimente o Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model ATENDIMENTOS {
  ID_ATENDIMENTO Int                   @id @default(autoincrement())
  ID_CLIENTE     Int
  CLIENTE        CLIENTES              @relation(fields: [ID_CLIENTE], references: [ID_CLIENTE])
  ID_PET         Int
  PET            PETS                  @relation(fields: [ID_PET], references: [ID_PET])
  ID_SERVICO     Int
  SERVICO        SERVICOS              @relation(fields: [ID_SERVICO], references: [ID_SERVICO])
  VALOR_COBRADO  Decimal
  TIPO           String                @db.VarChar(50)
  NOTAS          String?
  IMAGENS        ATENDIMENTO_IMAGENS[] // one atendimento can have many imagens (back-relation for ATENDIMENTO_IMAGENS.ATENDIMENTO)
}

model ATENDIMENTO_IMAGENS {
  ID_IMAGEM      Int          @id @default(autoincrement())
  ID_ATENDIMENTO Int
  ATENDIMENTO    ATENDIMENTOS @relation(fields: [ID_ATENDIMENTO], references: [ID_ATENDIMENTO])
  CAMINHO_IMAGEM String       @db.VarChar(255)
  DATA_UPLOAD    DateTime     @default(now())
}

model CLIENTES {
  ID_CLIENTE   Int            @id @default(autoincrement())
  NOME         String         @db.VarChar(100)
  TELEFONE     String         @db.VarChar(20)
  ENDERECO     String         @db.VarChar(255)
  PETS         PETS[] // one cliente can have many pets (back-relation for PETS.CLIENTE)
  PACOTES      PACOTES[] // one cliente can have many pacotes (back-relation for PACOTES.CLIENTE)
  ATENDIMENTOS ATENDIMENTOS[] // one cliente can have many atendimentos (back-relation for ATENDIMENTOS.CLIENTE)
}

model PETS {
  ID_PET       Int            @id @default(autoincrement())
  NOME         String
  RACA         String?
  DATA_NASC    DateTime?
  ID_CLIENTE   Int
  CLIENTE      CLIENTES       @relation(fields: [ID_CLIENTE], references: [ID_CLIENTE])
  ATENDIMENTOS ATENDIMENTOS[]
}

model PACOTES {
  ID_ASSINATURA Int      @id @default(autoincrement())
  ID_CLIENTE    Int
  CLIENTE       CLIENTES @relation(fields: [ID_CLIENTE], references: [ID_CLIENTE])
  ID_SERVICO    Int
  SERVICO       SERVICOS @relation(fields: [ID_SERVICO], references: [ID_SERVICO])
  QTD_BANHOS    Int      @default(0)
}

model SERVICOS {
  ID_SERVICO   Int            @id @default(autoincrement())
  NOME         String         @db.VarChar(100)
  DESCRICAO    String?
  VALOR        Decimal
  ATENDIMENTOS ATENDIMENTOS[] // one servico can have many atendimentos (back-relation for ATENDIMENTOS.SERVICO)
  PACOTES      PACOTES[] // one servico can be in many pacotes (back-relation for PACOTES.SERVICO)
}

model USUARIOS {
  ID_USUARIO   Int      @id @default(autoincrement())
  NOME         String   @db.VarChar(100)
  DESCRICAO    String?
  SENHA_HASH   String   @db.VarChar(255)
}